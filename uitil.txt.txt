uility function for version 3